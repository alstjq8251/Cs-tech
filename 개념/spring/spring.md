## Spring 이란?
- 스프링은 자바 기반의 웹 어플리케이션을 만들 수 있는 `프레임워크`이다. 
  - 스프링 프레임워크는 현대 자바 기반의 엔터프라이즈 어플리케이션을 설계하기 위한 프로그래밍 및 configuration Model을 제공한다.
    - 자바에서 웹 서비스를 만드는 프레임 워크이며 Python `Django` js- `Node.js` 등의 언어에서 사용 하는 프레임워크의 성격과 같다.
### 스프링(Spring) 프레임워크의 특징
- 1. `경량 컨테이너`로서 자바 객체를 직접 관리한다. 
  - 각각의 객체 생성, 소멸과 같은 라이프 사이클을 관리하며 스프링으로부터 필요한 객체를 얻어올 수 있다.
- 2. Spring 은 `POJO`(Plain Old Java Object) 방식의 프레임워크이다.
  - 일반적 J2EE 프레임워크에 비해 구현을 위한 특정 인터페이스를 구현하거나 상속할 필요가 없어 기존의 라이브러리등을 지원하기가 <br>용이하고 가볍다.
- 3. Spring은 `제어의 역전 IOC (Inversion of Control)`를 지원한다.
  - 제어권을 프레임워크가 가지기 때문에 필요에 따라 스프링에서 사용자의 코드를 호출하기도 한다.
- 4. 스프링은 의존성 주입(DI:Dependency Injection)을 지원한다.
  - 각 계층이나 서비스간 의존성이 존재할 경우 프레임워크가 관계를 설정하고 주입시켜 준다.
- 5. 스프링은 `관점 지향 프로그래밍`(AOP:Aspect-Oriented Programming)을 지원한다.
  - `트랜잭션`이나 로깅 보안과 같이 여러 모듈에서 공통적으로 사용하는 기능의 경우 해당 기능만 분리하여 관리할 수 있다.
- 6. 스프링은 영속성과 관련한 다양한 서비스를 지원한다.
  - `iBATIS` 나 `하이버네이트`등 완성도가 높은 데이터베이스(DB)처리 라이브러리와 연결할 수 있는 인터페이스를 제공한다.(Repo)
- 7. 스프링 확장성
  - 스프링에 통합하기 위해 간단하게 기존 라이브러리를 감싸는 정도로 사용이 가능하여 수많은 라이브러리가 지원되고 스프링에서 사용되는 라이브러리를 별도로 분리하기도 용이하다.
---
##### 컨테이너란 
- 인스턴스의 생명 주기를 관리하며 생성된 인스턴스들에게 추가적인 기능을 제공하도록 한 것
- 객체의 생성과 소멸을 컨트롤하기도 함.
---
### 스프링(Spring) Architecture
<img width="90%" alt="image" src="https://user-images.githubusercontent.com/98382954/182023725-0139d7c2-022e-4f8e-9544-dcde893be42f.png">

- 위 사진은 Application Layer별로 그룹화된 모듈 구성도이다.
- `스프링 모듈`은 스프링 프레임워크가 현재 가장 많이 사용되는 가장 중요한 요소이다.
  - 총 20개 이상의 모듈을 갖고 있는데 전부 사용해야 하는 것이 아니라 필요할 때 해당 모듈을 사용하면 되는 경량 컨테이너로 설계가 <br>되어있다.
 
- 1. Core Container
 ##### 스프링 프레임워크의 핵심인 `빈`의 생명주기와 설정 그리고 처리 방법을 관리하는 스프링 컨테이너이다.<br> 모든 스프링 모듈은 컨테이너 기반으로 구축된다.
  - `Beans`
    - `Bean` 스프링 `DI`기능의 핵심인 빈 팩토리와 DI기능을 제공하는 모듈이다.
      빈 메타 정보, 빈 리더, 빈 팩토리의 구현과 프로퍼티 에디터가 포함되어 있다고 한다.
      공장 패턴(디자인 패턴 중 생성에 해당)을 정교하게 구현한 빈 팩토리를 제공하는 모듈이다.
  - `Core`
    - `Core` 모듈은 IoC  및 DI기능을 비롯한 프레임워크의 기본적인 부분들을 제공한다.
      - 스프링에서 사용하는 주요 어노테이션과 컨버터,상수,그리고 유틸리티 클래스 등을 제공한다.
  - `Context`
    - 애플리케이션의 Context기능을 제공하는 모듈
    - 콘택스트를 만드는데 필요한 대부분 기능과 빈 스캔, 자바 코드 설정 기능, 표현식 , 스크립트 언어 지원등 주요 기능을 갖고 있다.
    - 단순 빈 팩토리가 아닌 엔터프라이즈 애플리케이션 프레임워크로 사용하기 위해선 반드시 필요한 모듈이라고 한다.
    - Core 및 Beans 모듈에서 제공하는 Solid 베이스를 기반으로 구축되며 정의되고 구성된 모든 객체에 접근할 수 있는 매체이다.
  - `SPEL`
    - `SPEL`모듈은 실행당시 객체 그래프를 쿼리하고 조작하기 위한 강력한 표현 언어를 제공한다.(표현 언어 기능 제공)
- 2. AOP & Aspect & Instrumentation
  - 1. `AOP` 스프링은 AOP 모듈을 통해 관점 지향 프로그래밍을 지원한다.
  - 2. `Aspects` 스프링이 제공하는 Aspectj AOP를 사용할때 필요한 모듈이다.
  - 3. `Instrument` 특정 애플리케이션 서버에서 사용할 클래스 계측 지원 및 클래스 로더 구현을 제공한다. 
    - 분리되어야 하는 기능을 구현하는 코드를 깔끔하게 분리하기 위해 인터셉터와 포인트컷을 정의할 수 있다.
    > `Pointcut`은 관점(Aspect)를 삽입해 어드바이스가 적용될 수 있는 위치를 의미한다. <br> 스프링에선 정규 표현식이나 AspectJ 문법을 이용해 Pointcut을 정의할 수 있다.


    > `Intercepter`는 스프링의 DispatcherServlet이 컨트롤러를 호출하기 전,후로 끼어들기에 스프링 컨텍스트 내부에 존재하게 된다.
    > 스프링 내의 모든 객체(bean)접근이 가능하고 복수 사용이 가능하며 로그인 체크, 권한 체크, 프로그램 실행시간 계산작업 로그확인
    > 업로드 파일 처리등에 사용된다.

    ~추후 AOP 파트에서 자세히 기술~
- 3. Messaging
  - Message, MesageChannel, MessageHandler 등 스프링 통합 프로젝트를 포함하고 있다.
  - 응용프로그램에서 사용할 WebSocket 하위 프로토콜로 `STOMP`를 지원한다. 
  - 메세지 기반 애플리케이션 구축하는 역할을 한다.(Spring MVC의 어노테이션 기반 모델과 역할이 비슷하다.)
    - 웹소켓 클라이언트의 STOMP 메세지를 라우팅하고 처리하기 위한 주석 프로그래밍 모델을 지원한다.
- 4. Test
  - Junit 또는 TestNG 프레임워크를 사용한 스프링 구성 요소의 테스트를 지원한다.
- 5. Data Access/Integration(데이터 엑세스/통합)
  **스프링은 JDBC, ORM, Transaction등의 서비스 추상화를 통해 쉽게 데이터에 접근하는 방법을 제공한다.**
  - `JDBC`
    - Java JDBC 프로그래밍을 쉽게 할 수 있도록 제공하는 모듈이며 JDBC 추상화 계층을 제공한다.
  - `ORM`
    - JPA,JDO 및 Hibernate를 포함한 널리 사용되는 관계형 매핑 API에 대한 통합 계층을 제공한다.
    - orm을 통해 간단한 선언적 트랜잭션 관리 기능을 비롯 Spring이 제공하는 다른 모든 기능을 O/R 매핑 프레임워크로 사용할 수 있게 한다.
  - `OXM`
    - JAXB, XMLBeans 등과 같은 객체/XML 매핑의 추상화 계층을 제공한다.
  - `JMS`
    - spring-JMS 모듈은 Java Messaging Service의 약자로 메세지 생성 및 사용을 위한 기능을 제공한다.
  - `Transaction`
    - spring-tx 모듈은 인터페이스를 구현하는 클래스와 모든 POJO에 대하여 선언적 트랜잭션 관리를 제공한다.
- 6. WEB
 **스프링은 다양한 MVC 프레임워크를 사용할 수 있지만 스프링 자체적으로 제공하는 Spring MVC 모듈들이 있다.**
 **또한 스프링의 리모팅 기술로 RMI, Hessian, HTTP 호출자, REST API 모듈 등을 제공한다**
  - `WebSocket` 웹 응용 프로그램에서 클라이언트와 서버 간의 웹소켓 기반 양방향 통신을 지원한다.
  - `Servlet` 스프링 MVC 기능을 제공하는 모듈, 전통적 MVC 와 @MVC의 기능이 모두 포함되어 있다.
  - `Web`웹 지향 어플리케이션 컨텍스트를 사용한 IoC 컨테이너의 초기화와 같은 기본적인 웹 지향 통합 기능을 제공한다. 
  - `Portlet`포틀릿 환경 미러 서블릿 기능에 사용될 MVC 구현을 제공한다.
  > `Web-MVC` 웹 응용 프로그램을 위한 Spring의 MVC(model-view-controller) 구현이 포함되어 있다.
---
### Spring Boot란?
 ~추후 기술~ 

---
## 스프링에서 사용되는 주요 모듈
### IoC 컨테이너
- `IoC(Inversion of Control)` **제어 반전 혹 제어의 역전**은 객체의 생성, 생명주기, 관리까지 모든 객체의 제어권이 바뀐것을 의미한다.
  - 사용자가 직접 new 명령어로 객체를 생성하는 것이 아니라 스프링에게 전적으로 위임하는 것을 말한다.
    - 스프링 프레임워크에서 객체를 생성하고 책임지고 의존성을 관리해주는 컨테이너가 IoC컨테이너(스프링 컨테이너)이다.
  ##### 인스턴스 생성부터 소멸까지 개발자가 아닌 컨테이너가 대신해주기에 객체관리 주체가 프레임워크가 되고 
  ##### 개발자는 로직에만 집중할 수 있는 장점이 존재한다.
- POJO의 생성,초기화,서비스,소멸에 대한 권한을 가진다.
- 개발자들이 직접 POJO를 생성할 수 있지만 컨테이너에게 맡긴다.
- 객체 생성 코드가 없어 TDD(테스트 주도 개발)이 용이하다.
#### IoC의 분류
<img width="90%" alt="image" src="https://user-images.githubusercontent.com/98382954/182028419-fbb4a313-0784-4236-9c81-561ef26ac1b3.png">

- DL(Dependency Lookup)과 DI(Dependency Injection)
  - `DL`각 저장소에 저장된 Bean에 접근하기 위해 컨테이너가 제공하는 API를 이용하여 Bean을 Look up하는 것
  - `DI`각 클래스간의 의존관계를 빈 설정(Bean Definition)정보를 바탕으로 컨테이너가 자동으로 연결해주는 것
    - Setter Injection(Setter 주입)
    - Constructior Injection(생성자 주입)
    - Method Injection(필드 주입)
#### DI 란?
- `의존성 주입`은 IoC의 원칙하에 객체간의 결합을 약하게 하고 유지보수가 좋은 코드를 만들어준다.
  - 여기서 의존성이란 객체간의 의존을 의미하는데 한 클래스가 다른 클래스의 매소드를 실행할 때 `의존`한다고 표현한다.
    - 자바 어플리케이션은 어플리케이션 동작을 제공하는 객체로 이뤄져 있고 이때 객체들은 독립적으로 동작하는 것 보다
      서로 상호작용하여 동작하는 경우가 많은데 이렇게 상호작용하는 객체를 `객체의 의존성`이라 표현한다.
- 스프링은 @Autowired 어노테이션을 이용한 다양한 의존성 주입 방법을 제공하는데 의존성 주입은 외부로부터 객체를 받아
  사용하는 것을 의미한다. -> 이를 통해 객체간의 결합도를 줄이고 코드의 재활용성을 높히는 것이다.
    - @autowired는 spring에게 의존성을 주입하는 지시자 역할로 사용된다.

##### 
- **의존성 주입의 필요성**
  - est가 용이해진다.
  - 코드의 재사용성을 높혀준다.
  - 객체간 의존성(종속성)을 줄이거나 없앨 수 있다.
  - 객체간 결합도를 낮추면서 유연한 코드를 작성할 수 있다.
- **의존성 주입 3가지 방법**
  - 생성자 주입
   <img width="90%" alt="image" src="https://user-images.githubusercontent.com/98382954/182028996-e2ac773c-204d-47e9-b6ca-2c0f50d8ad62.png">
  
    - 객체 필드부에 @Autowired 어노테이션만 붙이면 자동으로 의존성이 주입된다. 
      사용법이 간단하기에 가장 많이 접할 수 있지만 외부에서 변경하기 힘들다는 단점이 존재한다.
      프레임워크에 의존적이며 객체 지향적으로는 좋지 않은 방법이다.
  - 생성자 주입
   <img width="90%" alt="image" src="https://user-images.githubusercontent.com/98382954/182028994-685d423b-7738-4045-ae73-f54254a972f5.png">
  
    - 클래스의 생성자가 하나이며 그 생성자로 주입받는 객체가 빈이라면 @Autowired를 생략할 수 있다.
  - Setter 주입

  <img width="90%" alt="image" src="https://user-images.githubusercontent.com/98382954/182028999-0bfdc161-a99f-431b-81b5-fd7c8a700b91.png">
 
    - @Setter 메소드에 @Autowired 어노테이션을 붙이는 방법이다.
      - set메소드를 public으로 열어둬야 하기 때문에 언제 어디서나 변경하고 참조가 가능하다는 단점이 존재한다.
#### DI 3가지 방법 중 생성자 주입을 추천하는 이유는?
- 1. 순환 참조 방지
  - 개발하다 보면 서비스들 간에 의존 관계가 있고A가 B를 참조하고 B가 다시 A를 참조하는 경우를 가정한다.
    - 필드 주입과 수정자(Setter) 주입은 빈이 생성된 후 참조를 하기에 어플리케이션이 어떤 오류, 경고 없이 구동된다.
      이것은 실제 코드가 호출될 때까지 문제를 알 수 없다는 것인데 어플리케이션 구동은 잘된다.
        - 객체 생성 시점에서 순환 참조가 일어나는 것인지 객체 생성 후 비지니스 로직상에서 순환 참조가 일어나는 것인지의 차이인데
          필드 주입과 수정자 주입은 객체 생성후 비지니스 로직 상에서 순환 참조가 일어나기에 실 코드가 동작 하기 전 까지는 
          문제를 알 수 없지만 생성자 주입은 객체 생성 당시 사이클 관계가 형성되 어플리케이션을 실행하는 시점에서 오류를 체크할 수 있다.
- 2. 불변성(Immutability)
  - 생성자로 의존성을 주입받을 당시 final로 필드를 선언할 수 있고 런타임당시 주입받는 객체가 변할일이 없다는 것과 같다.
    - 수정자 주입이나 필드 주입은 필드부에서 수정의 가능성을 열어두고 객체 5원칙중 OCP를 위반하는 것과 같다.
- 3. 테스트에 용이
  - 생성자 주입을 사용할 시 테스트 코드를 좀 더 편리하게 작성할 수 있다.
    - DI로 주입받는 객체가 컨테이너에 의존성이 없거나 적다는 것을 의미하고 이건 독립적으로 인스턴스화가 가능하다는 것을 의미한다.
      그렇기에 테스트 코드를 작성할 당시 모듈로 분리하여 코드를 작성할 수 있기에 생성자 주입을 스프링에서 추천한다.
#### 스프링 컨테이너(IOC)의 종류
- 스프링 컨테이너가 관리하는 객체를 **빈(bean)** 이라고 한다.
  - 이 빈들을 관리하는 의미로 컨테이너를 **빈 팩토리(Bean Factory)** 라고 부른다.
    - 객체 생성과 객체 사이 런타임 관계를 DI관점에서 볼 때 컨테이너를 BeanFactory라고 한다.
    - BeanFactory에 여러가지 컨테이너 기능을 추가한 `어플리케이션컨텍스트(ApplicationContext)`가 있다.
- 1. Bean Factory
- ~추후 기술~
- 2. ApplicationContext
- ~추후 기술~
---
### Reference
<https://maenco.tistory.com/entry/Spring-Spring-Framework-Module-%EC%8A%A4%ED%94%84%EB%A7%81-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC-%EB%AA%A8%EB%93%88><br>
<https://www.tutorialspoint.com/spring/spring_architecture.htm><br>
