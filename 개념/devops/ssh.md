### ssh란?
- Secure Shell Protocol로서 SSH 프로토콜을 이용한 통신은 기본적으로 서버 클라이언트 모델에 기반한다
- SSH 접속을 위해서는 기본적으로 서버에 SSH 서버(= SSH 데몬)가 설치되어 있어야 하고, 클라이언트에는 SSH 클라이언트가 설치되어 있어야 한다.

### 동작 원리
1. 클라이언트-서버 연결 요청
2. 서버 인증
3. 키 교환을 통한 세션키 생성
4. 클라이언트 인증
5. 암호회된 세션 시작

#### 자세한 동작 과정
`클라이언트-서버 연결 요청`

1. 서버에서 공개키와 비밀키를 생성한다.
2. 클라이언트가 서버에 처음 접속 시도하면 서버의 공개키를 받아서 클라이언트에 있는 .ssh/known_hosts 파일에 저장한다.
3. 클라이언트는 난수값을 생성하여 난수의 해시값을 만들어 저장한다.
4. 난수 값을 서버의 공개키로 암호화하여 서버에 전송한다.
5. 서버에서는 암호화된 데이터를 비밀키로 복호화하여 난수 값을 얻어 낸다.
6. 난수 값으로 해시값을 만들어 클라이언트에 전송한다.
7. 클라이언트에서 저장하고 있는 3번 단계의 해시값과 서버로부터 전달받은 6번 단계의 해시값을 비교해 서버를 인증하게 된다.

`서버 인증`

1. 클라이언트가 서버에 처음 접속 시도시 연결을 진행할지 여부를 물어본다.(yes /no)
2. 서버가 자신의 공개키를 클라이언트에게 전송
   - 클라이언트가 서버에 접속을 시도하면, 서버는 자신의 **공개키(public key)**를 클라이언트에게 전송
3. 클라이언트는 서버의 공개키를 확인
4. 사용자가 서버의 공개키를 신뢰한다고 선택(yes)하면, 서버의 공개키는 클라이언트의 ~/.ssh/known_hosts 파일에 저장
5. 서버의 공개키가 이미 known_hosts 파일에 저장되어 있으면, 클라이언트는 이를 신뢰하고 자동으로 인증을 수행
6. 클라이언트가 이미 저장된 서버의 공개키와 접속하려는 서버의 공개키가 다르다면, 경고 메시지가 표시되며 중간자 공격 가능성이나 서버 변경 여부를 사용자에게 알림

`키 교환을 통한 세션키 생성`

`사용자 인증`