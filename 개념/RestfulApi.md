### Restful Api란 무엇일까?
<img width="100%" alt="image" src="https://github.com/alstjq8251/Cs-tech/assets/98382954/28f2a2df-0a31-448c-8860-90f723f4ca6a">

- Restful Api란 Rest와 Api가 합쳐진것으로 하단의 목차에서 Rest를 이해하고 Rest하게 Api를 만드는것을 이해하며 진행할것이다.

- Restful Api는 두 컴퓨터 시스템이 인터넷을 통해 정보를 안전하게 교환하기 위해 사용하는 인터페이스이다.
- 대부분의 비즈니스 애플리케이션은 다양한 태스크를 수행하기 위해 다른 내부 애플리케이션 및 서드 파티 애플리케이션과 통신해야 하는데

  RESTful API는 안전하고 신뢰할 수 있으며 효율적인 소프트웨어 통신 표준을 따르므로 이러한 정보 교환을 잘 지원한다고 할 수 있다.

### API란?
`Application Programming Interface(API)`란 다른 소프트웨어 시스템과 통신하기 위해 따라야 하는 규칙을 의미한다.
  - 개발자는 애플리케이션이 프로그래밍 방식으로 애플리케이션과 통신할 수 있도록 API를 표시하거나 생성한다.

웹 API는 클라이언트와 웹 리소스(혹은 서버) 사이의 게이트웨이라고 할 수 있다.

#### API에서의 Client
- 클라이언트는 웹에서 정보에 엑세스하려는 사용자를 의미한다.
  - 정보에 엑세스하려는 주체를 의미하기 때문에 사람 , 소프트웨어 시스템등 포괄적인 대상들로 지칭할 수 있다.
  - 도커를 이용할때 도커 데몬에게 API형태로 명령을 내리기 위해 클라이언트에서 제공하는 cli로 입력하게 되는데 이때 client-server간의 관계로 볼 수 있다.

#### API에서의 Resource
- 리소스는 다양한 어플리케이션이 클라이언트에게 제공하는 정보이다.
  - 여기서 리소스는 이미지, 동영상 , 텍스트, 숫자 등 모든 유형의 데이터를 의미한다.
  - 클라이언트에게 리소스를 제공하는 시스템을 서버라고 명명한다.
- 조직은 API를 이용해 리소스를 공유, 보안, 제어 및 인증을 유지하며 웹 서비스를 제공한다.

> API는 특정 내부 리소스에 엑세스 할 수 있는 클라이언트를 결정하는데 도움이 된다.


### Rest란?
`Representational State Transfer`의 약자로 자원을 이름(자원의 표현)으로 구분하여 해당 자원의 상태(정보)를 주고 받는 모든 것을 의미한다.
  - Representational State Transfer(REST)는 API 작동 방식에 대한 조건을 부과하는 소프트웨어 아키텍쳐라고도 할 수 있다.
- Rest는 처음에 인터넷 같은 복잡한 네트워크 통신을 과닐하기 위한 지침으로 만들어졌기 때문에 REST기반 아키텍쳐를 사용하여 대규모의 고성능 통신을 안정적으로 지원할 수 있게 된다.

API의 작동 방식에 대한 조건을 부과하는것은 이름 그대로 자원(resource)의 표현(representation) 에 의한 상태 전달을 명시하는것이 방법이 된다,

#### REST 구성 요소
`자원(Resource)` : URL
  - 모든 자원엔 고유 ID가 존재하고 이 자원은 Server에 존재한다.
  - 자원을 구별하는 고유 ID는 /server/resouce와 같은 HTTP URL을 의미한다.
  - Client는 URL을 이용해 자원을 지정하고 상태 정보에 대한 조작을 Server에 요청한다.

`행위(Verb)`: HTTP Method
  - HTTP 프로토콜의 Method를 사용한다.

`표현(Representation of Resource)`
  - Client가 자원의 상태(정보)에 대한 조작을 요청하면 Server는 이에 대한 적절한 응답(Representation)을 보낸다.
  - Rest에서 하나의 자원은 JSON, XML, TEXT, RSS등 여러 형태로 나뉠 수 있으며 일반적으로 JSON, XML을 사용한다.

- 월드 와이드 웹(www)과 같은 분산 하이퍼미디어 시스템을 위한 소프트웨어 개발 아키텍쳐의 한 형식으로 네트워크 상에서 Client와 Server상 통신 방식 중 하나이다.

#### Rest의 구체적 개념
- HTTP URI(Uniform Resource Identifier)를 통해 자원(Resource)을 명시하고, 

  HTTP Method(POST, GET, PUT, DELETE)를 통해 해당 자원에 대한 CRUD Operation을 적용하는 것을 의미한다.

#### Rest의 장단점
`장점`
- HTTP 프로토콜의 인프라를 그대로 사용하므로 API 사용을 위한 별도의 인프라를 구출할 필요가 없다.
- Hypermedia API의 기본을 충실히 지키면서 범용성을 보장한다.
- 서버와 클라이언트의 역할을 명확하게 분리한다.

`단점`
- 표준이 존재하지 않는다.
- HTTP Method의 형태가 제한적이다.
- 구형 브라우저가 아직 제대로 지원해주지 못하는 부분이 존재한다.
  - PUT, DELETE를 사용하지 못하는 점
  - pushState를 지원하지 않는 점

#### Rest 아키텍쳐 스타일의 원칙
1. 균일한 인터페이스
  - 균일한 인터페이스는 모든 RESTful 웹 서비스 디자인의 기본으로 서버가 표준 형식으로 정보를 전송함을 나타낸다.
  - 정보를 전송함에 있어 형식이 지정된 리소스를 REST에서 표현이라 부르며 서버의 내부 표현과는 다를 수 있다.
  - 균일한 인터페이스를 지키기 위한 4가지 원칙은 다음과 같다.
    1. 요청은 리소스를 식별해야 합니다. 이를 위해 균일한 리소스 식별자를 사용한다.
    2. 클라이언트가 원할때 리소스를 수정, 삭제하기에 충분한 정보를 리소스 표현에서 가지며 서버는 메타데이터를 전송해 이 조건을 충족시킨다.
    3. 클라이언트가 표현을 추가로 처리하기 위한 정보를 수신하며 이를 위해 서버에선 메타데이터가 포함된 명확한 상태를 전달한다.
    4. 클라이언트가 작업을 완료하는데 필요한 모든 관련 자원에 대한 정보를 수신한다.
      - 이를 위해 서버에선 더 많은 자원을 동적으로 검색할 수 있도록 표현에 하이퍼링크를 넣어 전송한다. 
2. 무상태
  - REST 아키텍처에서 무상태는 서버가 이전의 모든 요청과 독립적으로 모든 클라이언트 요청을 완료하는 통신 방법을 나타낸다.
  - 클라이언트는 임의의 순서로 리소스를 요청할 수 있으며 모든 요청은 무상태이거나 다른 요청과 분리된다.
3. 계층화 시스템
  - 계층화된 아키텍처에서 클라이언트는 서버간 다른 승인된 중개자에게 연결할 수 있으며 여전히 서버로도 응답을 받는다.
  - 서버는 API요청을 다른 서버에게 전달할 수도 있다.
  - 클라이언트의 요청을 이행하기 위해 함께 작동하는 보안 , 애플리케이션 , 비지니스 로직과 같은 다계층으로 여러 서버에서 실행되도록 설계할 수 있다.
    - 위와 같은 계층들은 클라이언트에 보이지 않는 상태로 유지된다.
4. 캐시 가능성
  - RESTful 웹 서비스는 응답 시간을 개선하기 위해 클라이언트 , 중개자에 일부 응답을 저장하는 프로세스인 캐싱을 지원한다.
  - RESTful 웹 서비스는 캐시 가능 , 불가능으로 정의되는 API 응답을 사용해 캐싱을 제어한다.
  - 웹 표준 HTTP 프로토콜을 그대로 사용하므로 웹에서 사용하는 기존의 인프라를 그대로 활용할 수 있다.
    - 즉, HTTP가 가진 가장 강력한 특징 중 하나인 캐싱 기능을 적용할 수 있다.
    - HTTP 프로토콜 표준에서 사용하는 Last-Modified 태그나 E-Tag를 이용하면 캐싱 구현이 가능하다.
5. 온디맨드 코드
  - 서버에서 프로그래밍 코드(Script)를 클라이언트에 전송해 클라이언트의 기능을 일시적으로 확장 및 지정할 수 있다.
    - 서버에서 전송하는 코드로 기능들을 확장하는것이 가능하지만 반드시 충족해야하는것은 아니다.

### REST API란?
``` 
API를 설계함 에 잇어 여러 아키텍처를 사용할 수 있는데 이때 REST 아키텍처 스타일을 따르는 API를 REST API라고 한다.
REST 아키텍처를 구현하는 웹 서비스를 RESTful 웹 서비스라고 하며 RESTful API는 RESTful 웹 API를 의미하며 같은 의미로도 사용이 가능하다.
```

#### RESTful API의 이점
`확장성`
  - REST API를 구현하는 시스템은 REST가 클라이언트-서버 상호 작용을 최적화하여 효율적으로 크기 조정할 수 있다.
    - 무상태는 클라이언트의 요청 정보를 유지할 필요가 없어 서버 로그를 제거하는 것으로 자원 낭비를 막는다.
    - 최적화된 캐싱은 일부 클라이언트-서버 상호 작용을 부분적 , 완전히 제거한다.
    - 위의 모든 기능들은 성능을 저하시키는 병목 현상을 일으키지 않으며 확장성을 지원한다.

`유연성`
  - RESTful API는 완전한 클라이언트-서버 분리를 지원한다.
  - 클라이언트 - 리소스를 제공하는 서버의 각 부분이 독립적으로 발전할 수 있도록 다양한 서버 구성 요소를 단순화하고 분리한다.
    - 서버 플랫폼 또는 기술 변경은 클라이언트 애플리케이션에 영향을 주지 않는다. 

`독립성`
  - REST API는 사용되는 기술과 독립적이다.
    - API설계에 영향을 주지 않고 다양한 프로그래밍 언어로 클라이언트 , 서버를 모두 설계할 수 있다.

#### RESTful API Client 요청 간 구성요소
`고유 리소스 식별자`
  - 서버는 고유한 리소스 식별자로 각 리소스를 식별한다.
  - REST 서비스의 경우 서버는 일반적으로 URL(Uniform Resource Locator)을 사용하여 리소스 식별을 수행한다.
  - URL은 요청 엔드포인트라고도 불리며 리소스에 대한 경ㅇ로를 지정하고 클라이언트가 요구하는 사항을 서버에 명확하게 지정한다.

`메서드(Method)`
  - 개발자는 Hypertest Transfer Protocl(HTTP)를 사용해 RESTful API를 구현하는데 이 메서드는 리소스에 수행해야 하는 작업을 서버에 알려준다.
  - 다음은 일반적인 4가지의 HTTP Method에 대한 설명이다.
    1. `Get`
      - 클라이언트는 GET을 이용해 서버의 지정된 URL에 있는 리소스에 엑세스한다.
      - Get요청을 캐싱하고 RESTful API요청에 파라미터를 같이 전송해 데이터를 필터하도록 지시할 수도 있다. 
    2. `POST`
      - 클라이언트는 POST를 이용해 서버에 데이터를 전송한다.
      - 요청과 함께 데이터 표현이 포함된다.
      - 동일한 POST요청을 여러번 전송하면 동일한 리소스를 여러 번 생성하는 부작용도 생길 수 있다. 
    3. `PUT`
      - 클라이언트는 PUT을 이용해 기존 리소스를 업데이트한다.
      - POST와 달리 RESTful 웹 서비스에서 동일한 PUT 요청을 반복하더라도 결과는 동일하다.
    4. `DELETE`
      - 클라이언트는 DELETE 요청을 사용해 리소스를 제거한다.
      - DELETE요청은 서버 상태를 변경할 수 있으며 이때는 적절한 인증이 필요할 수 있다.

`HTTP Header`
  - 요청 헤더는 클라이언트와 서버 간 교환되는 메타데이터이다.
  - 요청 및 응답의 형식을 나타내고 요청 상태 등에 대한 정보를 제공한다.

`Data`
  - REST API 요청엔 POST, PUT 및 기타 HTTP 메서드를 수행하기 위한 데이터가 포함될 수 있다.

`Parameter`
  - 수행해야 할 작업에 대한 자세한 정보를 서버에 제공하는 파라미터가 포함될 수 있다.
  - 다음은 몇가지 파라미터 유형이다.
    1. URL 세부정보를 지정하는 경로 파라미터
    2. 리소스에 대한 추가 정보를 요청하는 쿼리 파라미터
    3. 클라이언트를 빠르게 인증하는 쿠키 파라미터 

#### RESTful API 인증방법
**RESTful 웹 서비스는 신뢰도 있는 서비스를 구축하기 위해 무분별한 클라이언트의 요청을 막고자 요청을 인증하는 프로세스를 진행한다.**

- RESTful API에는 4가지의 일반적인 인증 방법이 있다.

1. HTTP 인증
  - HTTP는 REST API를 구현할 때 직접 사용할 수 있는 일부 인증 체계를 정의한다.
    1. 기본인증
      - 클라이언트는 요청 헤더에 사용자 이름과 암호를 넣어 전송한다.
        - 안전한 전송을 위해 이 페어를 64자의 세트로 변환하는 인코딩 기술인 base64로 인코딩한다.
    2. 전달자 인증
      - 전달자(bearer) 인증이라는 용어는 토큰 전달자에 대한 엑세스 제어를 제공하는 프로세스를 나타낸다.
      - 일반적으로 전달자 토큰(access token)은 서버가 로그인 요청에 대한 응답으로 생성하는 암호화된 문자열이다.
        - 기본적으로 사용되는 토큰은 base64알고리즘을 이용해 인코딩하지만 보안을 담보하기 위해 서버에선 HS256 (HMAC with SHA-256) 알고리즘을 사용해 시크릿키를 암/복호화 한다.
      - 클라이언트는 리소스에 엑세스하기 위해 요청 헤더에 토큰을 넣어 전송한다.     
2. API 키
  - API 키는 REST API 인증을 위한 옵션이며 이러한 방식에서 서버는 고유하게 생성된 값을 최초 클라이언트에 할당한다.
  - 클라이언트는 리소스에 엑세스 할 때마다 고유한 API키를 사용해 본인을 검증하는데 보안에 취약하다는 단점이 있다.
3. Oauth
  - Oauth는 모든 시스템에 대해 매우 안전한 로그인 엑세스를 보장하기 위해 암호와 토큰을 결합한다.
  - 서버는 먼저 암호를 요청하고 권한 프로세스를 완료하기 위해 추가 토큰을 요청한다.

#### RESTful API Server 응답 간 구성요소
1. 상태표시줄
  - 상태 표시줄엔 요청 성공 , 실패를 알리는 3자리 상태 코드가 있다.

```
일반적인 상태 코드와 설명으로 예시를 덧붙인다.
200: 일반 성공 응답
201: POST 메서드 성공 응답
400: 서버가 처리할 수 없는 잘못된 요청
404: 리소스를 찾을 수 없음
500: API의 정의된 규칙대로 서버가 응답을 구성하지 않음
```
2. 메세지 본문
  - 리소스 표현이 포함되며 요청 헤더에 포함된 내용을 기반으로 적절한 표현 형식을 선택한다.
  - 클라이언트가 데이터 작성 방식을 일반 텍스트로 정의하는 XML 또는 JSON 형식으로 정보를 요청하면 서버는 해당 데이터의 표현대로 메세지를 반환한다.

3. 헤더
  - 응답에 대한 헤더 , 메타데이터를 포함한다.
  - 응답에 대한 추가 컨텍스트를 제공하고 서버 , 인코딩 , 날짜 및 콘텐츠 유형과 같은 정보를 포함한다.

#### RESTful API 설계 원칙
1. URL는 정보의 자원을 표현해야 한다.
  - resource는 동사보단 명사, 대문자보단 소문자를 사용한다.
  - resource는 도큐먼트 이름으로는 단수 명사를 사용해야 한다.
  - resource는 컬렉션 이름으론 복수 명사를 사용해야 한다.
  - resource는 스토어 이름으론 복수 명사를 사용해야 한다.
2. 자원에 대한 행위는 HTTP Method로 표현한다.
  - URL에 행위에 대한 동사 표현이 포함되면 안된다.
    - CRUD 기능을 내포한 단어를 URL에 사용하지 않는다.
3. 경로 부분 중 변하는 부분은 유일한 값으로 대체한다.
4. 슬래시 구분자(/)는 계층 관계를 나타내는데 사용한다.
  - EX): https://github.com/alstjq8251/Cs-tech/edit/main/%EA%B0%9C%EB%85%90/RestfulApi.md
5. URL 마지막 문자로 슬래시(/)를 포함하지 않는다.
  - URL에 포함되는 모든 표현은 식별자로 사용되야 하며 URL이 다른것은 리소스가 다르다는 것을 의미한다.
  - REST API는 분명한 URL을 만들어 통신해야 하기 때문에 혼동을 주지 않도록 URL 경로의 마지막엔 슬래시(/)를 사용하지 않는다.
6. 하이픈(-)은 URL 가독성을 높이는데 사용한다.
  - 불가피하게 긴 URL 경로를 사용하게 된다면 - 을 사용해 가독성을 높인다.
7. 밑줄(_)은 URL에 사용하지 않는다.
  - URL에서 밑줄은 표현시 식별하기 어려우며 문자가 가려지기도 하여 가독성을 위해 사용하지 않는다.
8. URL 경로엔 소문자를 지향한다.
9. URL 경로엔 대문자를 지양한다.
  - RFC 3986(URI 문법 형식)은 URI 스키마와 호스트를 제외하고는 대소문자를 구별하도록 규정하기 때문이다.
10. 파일확장자를 URL에 포함하지 않는다.
  - REST API에선 메세지 바디 내용의 포맷을 나타내기 위한 파일 확장자를 URL 안에 포함시키지 않으며 Accept Header를 이용한다.

### REFERENCE
<https://gmlwjd9405.github.io/2018/09/21/rest-and-restful.html><br>
<https://aws.amazon.com/ko/what-is/restful-api/><br>
<https://velog.io/@wksh229/JWT%EB%A5%BC-RSA-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98%EC%9C%BC%EB%A1%9C-%EC%95%94%ED%98%B8%ED%99%94-%ED%95%98%EA%B8%B0>
