#### 가상기억장치(Virtual Memory)
`정의`
- **보조기억장치의 일부를 주기억장치처럼 사용하는 것**으로, 용량이 적은 주기억장치를 마치 큰 용량을 가진 것처럼 사용하는 기법이다.
- 프로그램을 여러 개의 작은 블록 단위로 나누어서 가상기억장치에 보관해놓고, 프로그램 실행 시 요구되는 블록만 주기억장치에

  불연속적으로 할당하여 처리한다.
- 주기억장치의 이용률과 다중 프로그래밍의 효율을 높일 수 있다.
- 블록 단위로 나눠 사용하므로 연속 할당 방식에서 발생할 수 있는 단편화를 해결할 수 있다.

> 블록은 보조기억장치와 주기억장치 간에 전송되는 데이터의 최소 단위를 의미한다.

`일반적인 구현 방법`

1. `페이징(Paging) 기법`
   - 가상 기억장치에 보관되어 있는 **프로그램과 주기억장치의 영역을 동일한 크기로 나눈 후** 나눠진 프로그램을 동일하게 나눠진 

     **주기억장치의 영역에 적재시켜 실행**하는 기법이다.
   - 프로그램을 일정한 크기로 나눈 단위를 페이지(Page)라고 하고, 페이지 크기로 일정하게 나뉜 주기억장치의 단위를
   
     페이지 프레임(Page Frame)이라고 한다.
   - 외부 단편화는 발생되지 않으나 내부 단편화는 발생될 수 있다.
   - 주소 변환을 위해서 페이지의 위치 정보를 가지고 있는 페이지 맵 테이블(Page Map Table)이 필요하다.
   - 페이지 맵 테이블 사용으로 비용이 증가하고, 처리 속도가 감소된다.

2. `세그먼테이션(Segmentation) 기법`
    - 가상기억장치에 보관되어 있는 **프로그램을 다양한 크기의 논리적인 단위로 나눈 후 주기억장치에 적재시켜 실행**시키는 기법이다.
    - 프로그램을 배열 등과 같은 논리적인 크기로 나눈 단위를 세그먼트(Segment)라고 하며, 각 세그먼트는 고유한 이름과 크기를 갖는다.
    - 이 기법을 이용하는 궁극적 이유는 기억공간을 절약하기 위해서이다.
    - 주소 변환을 위해 세그먼트가 존재하는 위치 정보를 갖고 있는 세그먼트 맵 테이블(Segment Map Table)이 필요하다.
    - 내부 단편화는 발생하지 않으나 외부 단편화는 발생할 수 있다.

### 가상기억장치 관리 사항

1. `페이지 크기`
    - 페이징 기법을 사용하면 프로그램을 페이지 단위로 나누게 되는데, 페이지의 크기에 따라 시스템에 미치는 영향이 다르다.
    - `페이지 크기가 작을 경우`
      - 페이지 단편화가 감소되고, 한 개의 페이지를 주기억장치로 이동시키는 시간이 줄어듦
      - 불필요한 내용이 주기억장치에 적재될 확률이 적으므로 효율적인 워킹 셋을 유지할 수 있음
      - 페이지 정보를 갖는 페이지 맵 테이블의 크기가 커지고, 매핑 속도가 늦어짐
      - 디스크 접근 횟수가 많아져 전체적 입 * 출력 시간은 늘어남
    - `페이지 크기가 클 경우`
      - 페이지 정보를 갖는 페이지 맵 테이블의 크기가 작아지고, 매핑 속도가 빨라짐
      - 디스크 접근 횟수가 줄어들어 전체적인 입 * 출력의 효율성이 증가됨
      - 페이지 단편화가 증가되고, 한 개의 페이지를 주기억장치로 이동시키는 시간이 늘어 남

2. `Locality(국부성, 지역성, 구역성, 국소성)`
   - **프로세스가 실행되는 동안 주기억장치를 참조할 때 일부 페이지만 집중적으로 참조하는 성질**이 있다는 이론이다.
   - 스레싱을 방지하기 위한 워킹 셋 이론의 기반이 되었다.
   - 가상기억장치의 관리와 캐시 메모리 시스템의 이론적인 근거이다.
   - 데닝(Denning) 교수에 의해 Locality의 개념이 증명되었다.
   - `종류`
     - `시간 구역성(Temporal Locality)`
       - 프로세스가 실행되면서 하나의 페이지를 일정 시간 동안 집중적으로 엑세스하는 현상
     - `공간 구역성(Spatial Locality)`
       - 프로세스 실행 시 일정 위치의 페이지를 집중적으로 엑세스 하는 현상

> 시간 구역성은 한 번 참조한 페이지는 가까운 시간 내 계속 참조할 가능성이 높다는 것을 의미하고, 공간 구역성은 어느 하나의 페이지를<br>
> 참조하면 그 근처의 페이지를 참조할 가능성이 높음을 의미한다.

3. `워킹 셋(Working Set)`
    - **프로세스가 일정 시간 동안 자주 참조하는 페이지들의 집합**이다.
    - 데닝(Denning)이 제안한 프로그램의 움직임에 대한 모델로, 프로그램의 Locality 특징을 이용한다.
    - 자주 참조되는 워킹 셋을 주기억장치에 상주시킴으로써 페이지 부재 및 페이지 교체 현상이 줄어 프로세스의 기억장치 사용이 안정된다.

4. `스래싱(Thrashing)`
    - **프로세스의 처리 시간보다 페이지 교체에 소요되는 시간이 더 많아지는 현상**이다.
    - 다중 프로그래밍 시스템이나 가상기억장치를 사용하는 시스템에서 프로세스 수행 과정 중 자주 페이지 부재(Page Fault)가
    
      발생함으로써 나타나며, 전체 시스템의 성능이 저하된다.
    - 다중 프로그래밍 정도가 높아짐에 따라 CPU의 이용률은 어느 특정 시점까지 높아지지만, 정도가 더욱 커지면 스래싱이 나타나고,
    
      CPU의 이용률은 급격히 감소하게 된다.

> 페이지 부재(Page Fault)는 프로세스 실행 시 참조할 페이지가 주기억장치에 없는 현상이며, 이 현상이 일어나는 횟수를<br>
> 페이지 부재 빈도(PFF Page Fault Frequency)라고 한다.
